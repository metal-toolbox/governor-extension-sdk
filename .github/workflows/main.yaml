on:
  workflow_dispatch:
  push:

env:
  APP_NAME: governor-extension-sdk

jobs:
  lint: 
    name: ğŸ“ lint
    runs-on: ubuntu-latest
    steps:
      - uses: metal-toolbox/ci-toolbox/actions/golangci-lint@init

  test:
    name: ğŸ§ª test
    runs-on: ubuntu-latest
    steps:
      - uses: metal-toolbox/ci-toolbox/actions/setup-go@init
      - name: tests
        run: make test

  scan:
    name: ğŸ” scan
    permissions:
      contents: read
      security-events: write
    uses: metal-toolbox/ci-toolbox/.github/workflows/trivy.yaml@init
    with:
      scan-type: fs
